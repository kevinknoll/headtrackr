<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Headtrackr</title>
  <style>
    canvas, video { border:1px solid #333; }
  </style>
</head>
<body>
  <canvas id="inputCanvas" width="320" height="240"></canvas>
  <canvas id="debugCanvas" width="320" height="240"></canvas>
  <video id="video" width="320" height="240"></video>
  <div id="webcam"></div>
  <!--<script src="getUserMedia.js/dist/getUserMedia.js"></script>
  <script src="getUserMedia.js/gum.js"></script>-->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="headtrackr.js"></script>
  <script>
    $(document).on('headtrackrStatus', function(e) {
      var oe = e.originalEvent,
          status = oe.status;

      console.log(e);
      if (status === 'no camera') {
        console.log('no camera');
      } else if (status === 'no getUserMedia') {
        console.log('no getUserMedia, fallback to flash');
      }
    });

    var htracker = new headtrackr.Tracker({
      debug:document.getElementById('debugCanvas')
    });
    htracker.init(document.getElementById('video'), document.getElementById('inputCanvas'));
    htracker.start();

    /*var canvas = document.getElementById('inputCanvas'),
        ctx = canvas.getContext('2d'),
        img = new Image(),
        interval;

    img.onload = function() {
      var x, y;
      interval = setInterval(function(){
        ctx.clearRect(0, 0, 320, 240);
        ctx.drawImage(img, Math.random() * 20, Math.random() * 20);
      },300);
    };
    img.src = 'nicenice.320.240.jpg';*/
  </script>
</body>
</html>